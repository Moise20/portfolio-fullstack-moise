@use 'styles/theme' as *;

.dock {
  position: fixed;
  left: 50%;
  bottom: max(16px, env(safe-area-inset-bottom));
  transform: translateX(-50%);
  z-index: 9999;
  background: rgba(10,14,25,.9);
  backdrop-filter: blur(6px);
  border-radius: 9999px;
  padding: .5rem .75rem;
  box-shadow: 0 18px 50px rgba(0,0,0,.45);
  border: 1px solid rgba(255,255,255,.06);
}

.dock__list { display:flex; align-items:center; gap:clamp(.8rem,2.2vw,1.4rem); margin:0; padding:0; list-style:none; }
.dock__item { display: contents; }

.dock__btn {
  position: relative;
  inline-size: 44px; block-size: 44px;
  border: 0; border-radius: 9999px;
  background: transparent; cursor: pointer;
  display: grid; place-items: center; outline: none;
  transition: transform .15s ease, color .15s ease;
  color: #fff;                             /* icônes blanches par défaut */
  &:hover { transform: translateY(-1px); }
  &:focus-visible { box-shadow: 0 0 0 3px rgba($color-primary, .35); }
}

.dock__btn.is-active { color: #0b132b; }   /* icône noire quand actif */
.dock__btn.is-active::before {
  content: "";
  position: absolute; inset: 0; border-radius: inherit;
  background: $color-primary;
}

/* Icône via mask SVG (outline) */
.dock__icon {
  inline-size: 22px; block-size: 22px; display: inline-block;
  background-color: currentColor;         /* prend la couleur du bouton */
  -webkit-mask: var(--icon) no-repeat 50% 50% / contain;
          mask: var(--icon) no-repeat 50% 50% / contain;
}

/* Déclare les SVG inline (encodeURIComponent) */
@function svg-url($p) {
  @return url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='#{$p}'/></svg>");
}

.dock__icon[data-icon="home"]    { --icon: #{svg-url('M3 10.5L12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1V10.5Z')}; }
.dock__icon[data-icon="user"]    { --icon: #{svg-url('M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-4.42 0-8 2.24-8 5v2h16v-2c0-2.76-3.58-5-8-5Z')}; }
.dock__icon[data-icon="book"] {
  --icon: #{svg-url('M9 12.75 11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 0 1-1.043 3.296 3.745 3.745 0 0 1-3.296 1.043A3.745 3.745 0 0 1 12 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 0 1-3.296-1.043 3.745 3.745 0 0 1-1.043-3.296A3.745 3.745 0 0 1 3 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 0 1 1.043-3.296 3.746 3.746 0 0 1 3.296-1.043A3.746 3.746 0 0 1 12 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 0 1 3.296 1.043 3.746 3.746 0 0 1 1.043 3.296A3.745 3.745 0 0 1 21 12Z')};
}
.dock__icon[data-icon="monitor"] { --icon: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path fill='currentColor' d='M4 5h16v10H4z'/><path fill='currentColor' d='M8 19h8v2H8z'/></svg>"); }
.dock__icon[data-icon="inbox"] {
  --icon: #{svg-url('M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z')};
}
